<%= turbo_stream.remove "post-#{@post.id}" %>

<%= turbo_stream.action :append, "flash-messages" do %>
  <script>
    if (window.createFlashMessage) {
      window.createFlashMessage('ç¿’æ…£æŠ•ç¨¿ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚', 'success');
    }
  </script>
<% end %>

<%= turbo_stream.action :append, "posts-container" do %>
  <script>
    // Check if there are no more posts visible and show the "no posts" message
    setTimeout(() => {
      const postsContainer = document.getElementById('posts-container');
      const dashboardGrid = postsContainer ? postsContainer.querySelector('.dashboard-grid') : null;
      const postCards = dashboardGrid ? dashboardGrid.querySelectorAll('.dashboard-card') : [];
      
      if (postCards.length === 0 && dashboardGrid) {
        dashboardGrid.innerHTML = `
          <div class="text-center py-5">
            <div class="dashboard-card" style="max-width: 500px; margin: 0 auto;">
              <div class="card-header">
                <h3 class="card-title">ğŸ“ ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</h3>
              </div>
              <div class="card-content">
                <p>æœ€åˆã®æŠ•ç¨¿ã‚’ã—ã¦ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ç››ã‚Šä¸Šã’ã¾ã›ã‚“ã‹ï¼Ÿ</p>
                <div class="card-actions">
                  <a href="<%= new_post_path %>" class="btn btn-primary">æŠ•ç¨¿ã™ã‚‹</a>
                </div>
              </div>
            </div>
          </div>
        `;
      }
    }, 300);
  </script>
<% end %>
