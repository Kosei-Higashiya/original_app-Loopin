# 📧 パスワードリセット機能 - メール設定ガイド

## 🔧 開発環境でのメール機能について

このアプリケーションは開発環境で `letter_opener_web` を使用してメールプレビュー機能を提供しています。実際のメールは送信されず、ブラウザでメール内容を確認できます。

## 📋 使用方法

### 1. Rails アプリケーションの起動

```bash
# Docker を使用する場合
docker compose up web

# または通常の Rails サーバー
bundle install
rails server
```

### 2. パスワードリセット申請

1. ブラウザで `http://localhost:3000/users/password/new` にアクセス
2. メールアドレスを入力して「パスワード再設定メールを送信」をクリック

### 3. ⭐ 重要: メール内容の確認方法

パスワードリセットメールを送信した後、**必ず以下のURL**にアクセスしてメール内容を確認してください：

**📬 http://localhost:3000/letter_opener**

このページで：
- 送信されたメールの一覧が表示されます
- 最新のパスワードリセットメールをクリックして内容を確認
- メール内の「パスワードを変更する」リンクをクリックしてパスワード更新画面へ

### 4. パスワード更新

メール内のリンクから新しいパスワードを設定して完了です。

## 🐛 トラブルシューティング

### メールが表示されない場合

1. **letter_opener のページを確認**: `http://localhost:3000/letter_opener`
2. **Rails コンソールでエラー確認**: サーバーのログでエラーメッセージをチェック
3. **メールアドレス確認**: 存在するユーザーのメールアドレスを使用しているか確認

### よくある問題

- ❌ **実際のメールが届かない**: 開発環境では実際のメールは送信されません
- ✅ **letter_opener で確認**: 代わりに `/letter_opener` でメール内容を確認してください
- ❌ **リンクが見つからない**: メールが送信されていない可能性があります。サーバーログでエラーを確認

## 🔍 設定確認

現在の設定:
- **配信方法**: `letter_opener_web` (開発環境)
- **送信者**: `noreply@loopin-app.com`
- **メール内容**: 日本語テンプレート
- **エラー表示**: 有効（デバッグ用）

## 💡 本番環境について

本番環境では実際のメール配信サービス（SendGrid、AWS SES等）の設定が必要です。開発環境の `letter_opener_web` は本番では無効になります。